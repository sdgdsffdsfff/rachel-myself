define("app/service/myPropertyService",["zepto","ajax"],function(e,t){function n(e){t({type:"GET",url:"/api/user/commission/"+e.commissionIds,dataType:"json",success:e.successCb})}function r(e){t({type:"PUT",url:"/api/user/commission/"+e.commissionId,data:e.data,dataType:"json",success:e.successCb})}return{getExclusiveBroker:n,selectBroker:r}}),define("app/my-property",["zepto","zepto.temp","app/service/myPropertyService"],function(e,t,n){function r(){function a(){o=setInterval(function(){n.getExclusiveBroker({commissionIds:i.join(";"),successCb:f})},2e3)}function f(t){e.each(t,function(e,t){l(t)}),o&&clearInterval(o),!i.length||a()}function l(e){if(e.status==2){var n=t("status2",{brokers:e.broker});s[e.commission_id].html(n),s[e.commission_id].removeClass("house-noselected").addClass("house-selecting").show(),i.splice(i.indexOf(e.commission_id),1)}}var r=e(".house-noselected");if(!r.length)return;var i=[],s={},o=null,u;e.each(r,function(t,n){u=e(n).parents(".house-info").attr("commissionId"),i.push(u),s[u]=e(n)}),a()}function i(){function i(t){if(t.status*1==3||t.status*1==4){var n=e.temp("status3",{ret:t});r.html(n).removeClass("house-selecting").addClass("house-selected").show(),t.property.certified*1==1?e("#isAuthen").show():null;if(t.status*1==4&&t.property.commission_status==1){var i=r.parent(".house-info").children(".house-detail").children(".icon-property-info");i.attr("isshow","true"),i.show()}}}var t=e(".house-selecting .btn-select"),r;t.live("click",function(){var t=e(this).attr("brokerId"),s=e(this).parents(".house-info").attr("commissionId");r=e(this).parents(".house-selecting"),n.selectBroker({commissionId:s,data:{broker_uid:t,commission_id:s},successCb:i})})}function s(){var t=e(".house-detail");t.on("click",function(){e(this).children(".icon-property-info").attr("isshow")=="true"&&(location.href=e(this).attr("propertyUrl"))})}(function(){r(),i(),s()})()}),require(["./common"],function(e){require(["app/my-property"])}),define("../my-property",function(){});