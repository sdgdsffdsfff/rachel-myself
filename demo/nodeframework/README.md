#####框架构思
我们这边使用的是中间件的形式，来为框架添加功能，这些中间件是在执行主业务逻辑之前执行的，且这些中间件自身之间也是有顺序的。web服务器的request事件的触发，表示有客户来访问我们的服务器资源。而且我们的服务器主逻辑，就是为了响应request事件的。伪代码的表示如下：
```javascript
function handler() {
    //中间件按照顺序逐个执行
    middleWare1();
    middleWare2();
    ...
    主业务逻辑处理
}
server.on('request', handler);
```


#####怎样保证中间件的先后顺序执行
如果想要中间件的顺序执行，关靠数组的执行顺序是达不到的，因为js会牵扯到异步执行和延迟执行（setTimeout）的情况。这些情况下，我们可以通过以下方式保证它的顺序执行。
即我们给中间件一个next函数，当执行next函数的时候，其实表示中间件自身是已经被执行完成了的（保证自己要做的一切都搞定了才放手），才把权力交棒给下一个中间件。这么说来，只要中间件自身内部不调用next函数，那下一个中间件就不会被执行。权力牢牢掌握在自己手里。
