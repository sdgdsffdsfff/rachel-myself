<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title></title>
</head>
<body>
	<script>
	//æ–‡ä»¶éœ€è¦æ”¾åœ¨æœ‰apacheæœåŠ¡å™¨æ­å»ºçš„æœºå™¨ä¸Šè°ƒè¯•ï¼Œçœ‹æ•ˆæœ
	// var worker = new Worker('./worker.js');//åˆ›å»ºä¸€ä¸ªWorkerå¯¹è±¡å¹¶å‘å®ƒä¼ é€’ï¼Œå°†åœ¨æ–°çº¿ç¨‹ä¸­æ‰§è¡Œçš„è„šæœ¬URL
	// worker.postMessage('hello world!'); //å‘æ–°åˆ›å»ºçš„workerä¼ é€’æ•°æ®
	// worker.onmessage = function(evt) {
	// 	//æ¥æ”¶ä¼ é€’è¿‡æ¥çš„æ•°æ®è¦ä½¿ç”¨xx.data
	// 	console.log('I am a test.html. The data is ',evt.data);
	// }

	/*
WEBä¸»çº¿ç¨‹:

1.é€šè¿‡ worker = new Worker( url ) åŠ è½½ä¸€ä¸ªJSæ–‡ä»¶æ¥åˆ›å»ºä¸€ä¸ªworkerï¼ŒåŒæ—¶è¿”å›ä¸€ä¸ªworkerå®ä¾‹ã€‚

2.é€šè¿‡worker.postMessage( data ) æ–¹æ³•æ¥å‘workerå‘é€æ•°æ®ã€‚

3.ç»‘å®šworker.onmessageæ–¹æ³•æ¥æ¥æ”¶workerå‘é€è¿‡æ¥çš„æ•°æ®ã€‚

4.å¯ä»¥ä½¿ç”¨ worker.terminate() æ¥ç»ˆæ­¢ä¸€ä¸ªworkerçš„æ‰§è¡Œã€‚

workeræ–°çº¿ç¨‹ï¼š

1.é€šè¿‡postMessage( data ) æ–¹æ³•æ¥å‘ä¸»çº¿ç¨‹å‘é€æ•°æ®ã€‚

2.ç»‘å®šonmessageæ–¹æ³•æ¥æ¥æ”¶ä¸»çº¿ç¨‹å‘é€è¿‡æ¥çš„æ•°æ®ã€‚
	*/
	</script>


	<script>
	onload = function() {
		var worker = new Worker('./fibonacci.js');
		worker.onmessage = function(evt) {
			var timeAfter = (new Date()).valueOf();
			console.log('ç»“æœ(40çš„fibonacci)ï¼š'+ evt.data,'å½“å‰æ—¶é—´ï¼š'+ timeAfter, 'ç”¨æ—¶ï¼š' + (timeAfter - timer));
		}
		var timer = (new Date()).valueOf();
		console.log('å¼€å§‹è®¡ç®—ï¼Œå½“å‰æ—¶é—´ï¼š' + timer);
		setTimeout(function() {
			var timerr = (new Date()).valueOf();
			console.log('å®šæ—¶å™¨å‡½æ•°åœ¨è®¡ç®—æ•°åˆ—æ—¶ï¼Œæ‰§è¡Œï¼Œå½“å‰æ—¶é—´' + timerr, 'ç”¨æ—¶ï¼š' + (timerr - timer));
		}, 1000);

		worker.postMessage(40);
		console.log('æˆ‘ä¹Ÿæ˜¯åœ¨è®¡ç®—æ•°åˆ—æ—¶æ‰§è¡Œï¼Œworkerçš„æ‰§è¡Œä¸å½±å“æˆ‘ï¼Œå“ˆå“ˆï½ğŸ˜„.ç”¨æ—¶ï¼š' + ((new Date()).valueOf() - timer));
	}

	// ä¸Šè¿°æ‰§è¡Œç»“æœï¼š
	// 	å¼€å§‹è®¡ç®—ï¼Œå½“å‰æ—¶é—´ï¼š1419393438960
	// 	æˆ‘ä¹Ÿæ˜¯åœ¨è®¡ç®—æ•°åˆ—æ—¶æ‰§è¡Œï¼Œworkerçš„æ‰§è¡Œä¸å½±å“æˆ‘ï¼Œå“ˆå“ˆï½ğŸ˜„.ç”¨æ—¶ï¼š5
 	//  å®šæ—¶å™¨å‡½æ•°åœ¨è®¡ç®—æ•°åˆ—æ—¶ï¼Œæ‰§è¡Œï¼Œå½“å‰æ—¶é—´1419393439968 ç”¨æ—¶ï¼š1008
	// 	ç»“æœ(40çš„fibonacci)ï¼š102334155 å½“å‰æ—¶é—´ï¼š1419393452619 ç”¨æ—¶ï¼š13659

	// ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œfibonacciæ•°åˆ—çš„è®¡ç®—å¹¶ä¸ä¼šå½±å“åˆ°ä¸»çº¿ç¨‹çš„ä»£ç æ‰§è¡Œï¼Œå®Œå…¨åœ¨è‡ªå·±ç‹¬ç«‹çš„çº¿ç¨‹ä¸­è®¡ç®—ï¼Œåªæ˜¯åœ¨è®¡ç®—å®Œæˆä¹‹åå°†ç»“æœå‘å›ä¸»çº¿ç¨‹è€Œå·²ã€‚
	</script>
</body>
</html>

